// Generated by CoffeeScript 1.9.2
(function() {
  var base, moveTool;

  if (window.tacit == null) {
    window.tacit = {};
  }

  if ((base = window.tacit).tools == null) {
    base.tools = {};
  }

  moveTool = {
    allowPan: true,
    name: "move",
    mouseDown: function(easel, eventType, mouseLoc, object) {
      var idx;
      this.dragging = true;
      if (eventType === "node") {
        this.selection = object;
        this.allowPan = false;
        idx = easel.pad.sketch.selectedNodes.indexOf(object);
        if (idx === -1) {
          easel.pad.sketch.selectedNodes.push(object);
        }
        return easel.pad.sketch.quickDraw();
      }
    },
    mouseUp: function(easel, eventType, mouseLoc, object) {
      var idx;
      this.dragging = false;
      if (this.selection) {
        idx = easel.pad.sketch.selectedNodes.indexOf(this.selection);
        easel.pad.sketch.selectedNodes.splice(idx, 1);
        easel.pad.sketch.quickDraw();
        this.selection = null;
        return this.allowPan = true;
      }
    },
    mouseMove: function(easel, eventType, mouseLoc, object) {
      if (this.dragging && this.selection) {
        this.selection.moveto({
          x: mouseLoc[0],
          y: mouseLoc[1]
        });
        return easel.pad.sketch.quickDraw();
      }
    }
  };

  window.tacit.tools.move = moveTool;

}).call(this);
