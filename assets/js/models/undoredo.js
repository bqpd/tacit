// Generated by CoffeeScript 1.9.2
(function() {
  var UndoRedo;

  if (window.tacit == null) {
    window.tacit = {};
  }

  UndoRedo = (function() {
    function UndoRedo(project) {
      this.project = project;
      this.pointer = -1;
      this.log();
    }

    UndoRedo.prototype.log = function() {
      var structure;
      this.project.actionQueue = this.project.actionQueue.slice(0, this.pointer + 1);
      structure = new tacit.Structure(this.project.easel.pad.sketch.structure);
      structure.solve();
      this.project.actionQueue.push(structure);
      return this.pointer = this.project.actionQueue.length - 1;
    };

    UndoRedo.prototype.undo = function() {
      if (this.pointer - 1 >= 0) {
        this.pointer -= 1;
        this.project.easel.pad.load(this.project.actionQueue[this.pointer]);
        return this.project.easel.pad.sketch.updateDrawing();
      }
    };

    UndoRedo.prototype.redo = function() {
      if (this.pointer + 1 < this.project.actionQueue.length) {
        this.pointer += 1;
        this.project.easel.pad.load(this.project.actionQueue[this.pointer]);
        return this.project.easel.pad.sketch.updateDrawing();
      }
    };

    return UndoRedo;

  })();

  window.tacit.UndoRedo = UndoRedo;

}).call(this);
